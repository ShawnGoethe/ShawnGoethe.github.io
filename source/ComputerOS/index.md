---
title: ComputerOS
date: 2019-04-21 12:15:39
---
# concept

OS（Operating System）是控制和管理整个计算机系统的硬件和软件资源，合理调度计算机的工作和资源分配，提供给用户和其他软件接口和环境。

## 四大特征

- 并发
- 共享
- 虚拟
- 异步

### 并发

概念：指多个事件在同一时间间隔内发生，宏观上是同时发生，微观上是交替发生（区别于并行：多个事件同一时刻发生）

### 共享

分为：互斥共享，同时共享

### 虚拟

把物理上的实体变为若干个逻辑上对应物，如4GB内存可以同时运行大于4G的软件（时分复用或者空分复用）

### 异步

多个程序并发执行，断断续续同步推进

# 运行机制与体系结构

## 运行机制

指令=特权指令+非特权指令

特权：如内存清零

非特权：如普通运算



CPU=用户态（非核心）+核心态（核心+非核心）

> 程序状态寄存器PSW，0为用户态，1位核心态

内核：

- 时钟管理（计时）
- 中断处理
- 原语
- 系统资源管理（进程，存储器，设备管理）

大内核：高性能但维护麻烦

微内核:结构清晰但切换开销大

## 中断和异常

中断是CPU进入核心态，当前进程暂停，而核心态-->用户态只需要通过PSW的特权指令就可以进入

中断=内中断+外中断

- 内中断：异常，例外，陷入
  - 指令中断
  - 硬件故障（如缺页），软件中断（如编程语法错误）
- 外中断：外设请求，人工干预

## 系统调用

- 设备管理
- 文件管理
- 进程控制
- 进程通信
- 内存管理

传递系统调用参数-->限制性陷入指令（用户态）-->执行系统调用相应服务程序（核心态）-->返回用户程序

> 陷入指令在用户态执行，执行陷入指令后立即引发一个内中断，从而CPU进入核心态

## 库函数

应用程序-->库函数-->系统调用

库函数目的：高级开发，更方便系统调用

# 进程

why:

what:是运行过程，是系统进行资源分配和调度的最小单位

> 进程段=程序段+数据段+PCB
>
> PCB=PID+UID+进程控制管理信息（进程状态，优先级）+资源分配（程序段指针，数据段指针，键盘鼠标）+处理机信息（寄存器值）

feature:

- 动态性
- 并发性
- 独立性
- 异步性

组织方式：

- 链接方式（执行指针，就绪指针，阻塞指针）
- 索引方式（执行指针，就绪指针，索引指针）

### 五种状态

- 运行
- 就绪
- 阻塞
- 创建
- 终止

